# Guest Service Microservice

## Описание
Этот микросервис предназначен для управления данными о гостях. Он предоставляет API для выполнения CRUD операций (создание, чтение, обновление, удаление) над сущностью "Гость". Микросервис реализован на PHP (Yii2) с использованием Docker для контейнеризации.

### Сущность "Гость"
Каждый гость имеет следующие атрибуты:
- `id` (уникальный идентификатор)
- `first_name` (имя, обязательное поле)
- `last_name` (фамилия, обязательное поле)
- `email` (электронная почта, уникальное поле)
- `phone` (телефон, уникальное поле, обязательное поле)
- `country` (страна, опциональное поле)
  Если страна не указана, она определяется по телефонному коду (например, +7 - Россия).

### Установка
1. **Склонируйте репозиторий:**
   ```bash
   git clone <URL-вашего-репозитория>
   cd <папка-с-проектом>
   ```

2. **Создайте файл `.env` в корне проекта и укажите необходимые переменные окружения:**
   ```
   DB_ROOT_PASSWORD=root_password
   DB_NAME=guest_service
   DB_USERNAME=user
   DB_PASSWORD=password
   TZ=Europe/Moscow
   ```

3. **Постройте Docker образы и запустите контейнеры:**
   ```bash
   docker-compose build
   docker-compose up -d
   ```

4. **Установите зависимости внутри контейнера `php-fpm`:**
   ```bash
   docker-compose exec php-fpm composer install
   ```

5. **Создайте документацию API:**
   ```bash
   docker-compose exec php-fpm apidoc -i /www/modules/api/controllers/ -o /www/docs/api
   ```

6. **Доступ к документации API:**
   Откройте [http://localhost/docs/api/](http://localhost/docs/api/) в вашем веб-браузере для просмотра документации.

### API Документация
API поддерживает следующие запросы:
- **GET /guests** - Получить список всех гостей
- **GET /guests/{id}** - Получить информацию о конкретном госте по ID
- **POST /guests** - Создать нового гостя
- **PUT /guests/{id}** - Обновить информацию о госте по ID
- **DELETE /guests/{id}** - Удалить гостя по ID

#### Примеры запросов
- **Создание гостя:**
  ```bash
  curl -X POST http://localhost/guests -H "Content-Type: application/json" -d '{"first_name": "John", "last_name": "Doe", "email": "john.doe@example.com", "phone": "+1234567890"}'
  ```

- **Получение списка гостей:**
  ```bash
  curl -X GET http://localhost/guests
  ```

### Дополнительная информация
В ответах сервера присутствуют следующие заголовки:
- `X-Debug-Time` - время выполнения запроса в миллисекундах
- `X-Debug-Memory` - количество используемой памяти в Кб
  Если у вас возникли вопросы или проблемы, пожалуйста, создайте issue в репозитории.
